!function(){"use strict";var e={};window&&Object.assign(e,window._environment),angular.module("srisys-app",["ui.router","permission","permission.ui"]).constant("env",e).constant("keys",{userkey:"USERKEY",userpermissions:"USERPERMISSIONS"}).config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/home"),e.state("login",{url:"/login",templateUrl:"/views/common/login.html",controller:"loginController",controllerAs:"ctrl"}).state("home",{url:"/home",templateUrl:"/views/home/index.html",controller:"homeController",controllerAs:"ctrl"}).state("system",{url:"/system",templateUrl:"/views/common/index.html",controller:"manageSystemController",controllerAs:"ctrl",data:{permissions:{only:"admin",redirectTo:"unauthorized"}}}).state("system.list-suppliers",{url:"/list/suppliers",templateUrl:"/views/system/supplier-list.html",controller:"viewSuppliersController",controllerAs:"ctrl"}).state("system.add-supplier",{url:"/add/supplier/{id}",templateUrl:"/views/system/add-supplier.html",controller:"addSupplierController",controllerAs:"ctrl"}).state("system.list-categories",{url:"/list/categories",templateUrl:"/views/system/category-list.html",controller:"viewCategoriesController",controllerAs:"ctrl"}).state("system.add-category",{url:"/add/category/{id}",templateUrl:"/views/system/add-category.html",controller:"addCategoryController",controllerAs:"ctrl"}).state("system.list-users",{url:"/list/users",templateUrl:"/views/system/user-list.html",controller:"viewUsersController",controllerAs:"ctrl"}).state("system.add-user",{url:"/add/user/{id}",templateUrl:"/views/system/add-user.html",controller:"addUserController",controllerAs:"ctrl"}).state("system.list-borrowers",{url:"/list/borrowers",templateUrl:"/views/system/borrower-list.html",controller:"viewBorrowersController",controllerAs:"ctrl"}).state("system.add-borrower",{url:"/add/borrower/{id}",templateUrl:"/views/system/add-borrower.html",controller:"addBorrowerController",controllerAs:"ctrl"}).state("inventory",{url:"/inventory",templateUrl:"/views/common/index.html",controller:"manageInventoryController",controllerAs:"ctrl"}).state("inventory.list",{url:"/list",templateUrl:"/views/inventory/item-list.html",controller:"viewItemsController",controllerAs:"ctrl"}).state("inventory.add",{url:"/add/{id}",templateUrl:"/views/inventory/add-item.html",controller:"addItemController",controllerAs:"ctrl",data:{permissions:{only:["admin","canWrite"],redirectTo:"unauthorized"}}}).state("inventory.purchase",{url:"/purchase",templateUrl:"/views/inventory/purchase-item.html",controller:"purchaseItemController",controllerAs:"ctrl",data:{permissions:{only:["admin","canWrite"],redirectTo:"unauthorized"}}}).state("inventory.adjust",{url:"/adjust",templateUrl:"/views/inventory/adjust-item.html",controller:"adjustItemController",controllerAs:"ctrl",data:{permissions:{only:["admin","canWrite"],redirectTo:"unauthorized"}}}).state("inventory.details",{url:"/details/{id}",templateUrl:"/views/inventory/item-details.html",controller:"itemDetailsController",controllerAs:"ctrl"}).state("activity",{url:"/activities",templateUrl:"/views/common/index.html",controller:"manageActivityController",controllerAs:"ctrl"}).state("activity.log",{url:"/log",templateUrl:"/views/activity/activity-list.html",controller:"viewActivitiesController",controllerAs:"ctrl"}).state("activity.borrow",{url:"/borrow",templateUrl:"/views/activity/borrow-items.html",controller:"borrowItemController",controllerAs:"ctrl",data:{type:"Tools",permissions:{only:["admin","canWrite"],redirectTo:"unauthorized"}}}).state("activity.consume",{url:"/consume",templateUrl:"/views/activity/borrow-items.html",controller:"borrowItemController",controllerAs:"ctrl",data:{type:"Consumables",permissions:{only:["admin","canWrite"],redirectTo:"unauthorized"}}}).state("activity.return",{url:"/return",templateUrl:"/views/activity/return-items.html",controller:"returnItemController",controllerAs:"ctrl",data:{permissions:{only:["admin","canWrite"],redirectTo:"unauthorized"}}}).state("reports",{url:"/reports",templateUrl:"/views/common/index.html",controller:"manageReportsController",controllerAs:"ctrl"}).state("reports.items",{url:"/daily/items",templateUrl:"/views/report/daily-report.html",controller:"dailyReportController",controllerAs:"ctrl",data:{type:"Tools"}}).state("reports.consumables",{url:"/daily/consumables",templateUrl:"/views/report/daily-report.html",controller:"dailyReportController",controllerAs:"ctrl",data:{type:"Consumables"}}).state("reports.count-sheet",{url:"/countsheet",templateUrl:"/views/report/count-sheet-report.html",controller:"stocksReportController",controllerAs:"ctrl"}).state("reports.low-stocks",{url:"/lowstocks",templateUrl:"/views/report/low-stocks-report.html",controller:"lowStocksReportController",controllerAs:"ctrl"}).state("reports.stocks",{url:"/stocks",templateUrl:"/views/report/stocks-report.html",controller:"stocksReportController",controllerAs:"ctrl"}).state("unauthorized",{url:"/unauthorized",templateUrl:"/views/common/unauthorized.html"})}]).run(["$rootScope","$state","$stateParams","$transitions","loginRedirect","currentUser",function(e,t,r,o,n,i){e.$state=t,e.$stateParams=r,o.onBefore({},function(e){var t=e.to().name;if("login"!=t&&!i.userProfile.loggedIn)return n.setLastState(t),e.router.stateService.target("login")})}])}(),angular.module("srisys-app").directive("addEditShell",[function(){return{restrict:"E",transclude:{title:"shellTitle",form:"shellForm",controls:"shellControls"},templateUrl:"/views/common/add-edit-shell.html?"+$.now()}}]),function(e){var t=["$scope","$timeout","lookupService",function(e,t,r){e.search="",e.items=[],e.selectedItem={},e.selectedIndex=-1,e.isFocused=e.isFocused||!1,e.showLoading=!1,e.$watch("selectedValue",function(t,n){void 0==t||0==t?o():void 0==e.selectedItem&&r.fetchItemById(e.route,t).then(function(t){var r=t.data;e.itemSelected(r)},function(e){toastr.error("Unable to fetch autocomplete item.","Error")})}),e.itemSelected=function(t){void 0!=t?(e.selectedItem=t,e.selectedValue=t.Id,e.search=t.ItemName):o(),e.items=[]},e.handleKeydown=function(t){switch(t.keyCode){case 13:t.preventDefault();break;case 9:if(1==e.items.length){var r=e.items[0];e.itemSelected(r)}else if(e.items.length>0&&-1!=e.selectedIndex){r=e.items[e.selectedIndex];e.itemSelected(r)}}},e.handleKeyup=function(n){switch(n.keyCode){case 13:var i=e.items[e.selectedIndex];e.itemSelected(i),e.onEnter&&t(function(){e.onEnter()},50);break;case 38:0!=e.selectedIndex&&(e.selectedIndex-=1);break;case 40:e.selectedIndex!=e.items.length-1&&(e.selectedIndex+=1);break;default:if(void 0==e.route||""==e.route)return;if(""==e.search)return void o();e.showLoading=!0,r.fetchItems(e.route,e.search).then(function(t){var r=t.data;e.items=r,e.selectedIndex=-1,e.showLoading=!1},function(t){toastr.error("Unable to fetch autocomplete items.","Error"),e.showLoading=!1})}};var o=function(){e.items=[],e.search="",e.selectedIndex=-1,e.selectedItem={},e.selectedValue=0}}];angular.module("srisys-app").directive("autocomplete",function(){return{restrict:"E",templateUrl:"/views/common/autocomplete.html",scope:{selectedItem:"=",selectedValue:"=",route:"@",isFocused:"=?",onEnter:"&?"},controller:t}})}(),angular.module("srisys-app").directive("columnHeader",[function(){return{restrict:"E",templateUrl:"/views/common/column-header.html?"+$.now(),scope:{headerText:"@",headerValue:"@",fetchCallBack:"&",sort:"=",sortDirection:"="},controller:["$scope","$timeout",function(e,t){e.performSort=function(r){e.sort==r?e.sortDirection="asc"==e.sortDirection?"desc":"asc":(e.sort=r,e.sortDirection="asc"),t(function(){e.fetchCallBack()},50)},e.glyphVisible=function(t){return e.sort==t},e.upVisible=function(){return"asc"==e.sortDirection},e.downVisible=function(){return"desc"==e.sortDirection}}],controllerAs:"ctrl"}}]),angular.module("srisys-app").directive("detailsShell",[function(){return{restrict:"E",transclude:{title:"shellTitle",details:"shellDetails"},templateUrl:"/views/common/details-shell.html?"+$.now()}}]),angular.module("srisys-app").directive("discountControl",[function(){return{restrict:"E",templateUrl:"/views/common/discount-control.html?"+$.now(),scope:{discountPercent:"=",discountAmount:"="}}}]),angular.module("srisys-app").directive("focusMe",["$timeout",function(e){return{scope:{trigger:"=focusMe"},link:function(t,r){t.$watch("trigger",function(o){!0===o&&e(function(){r[0].focus(),t.trigger=!1})})}}}]),angular.module("srisys-app").directive("formControl",[function(){return{restrict:"E",templateUrl:"/views/common/form-control.html?"+$.now(),scope:{onSave:"&",onReset:"&",saveEnabled:"="},controller:["$scope",function(e){return this.onSave=function(){e.onSave()},this.onReset=function(){e.onReset()},this}],controllerAs:"ctrl"}}]),function(e){var t=function(e,t){!function(e){var t=e.querySelector("input, textarea, select"),r=t.getAttribute("type");"checkbox"!==r&&"radio"!==r&&(t.classList.add("form-control"),t.classList.add("input-sm"));var o=e.querySelector("label");o&&o.classList.add("control-label"),e.classList.add("form-group"),e.classList.add("form-group-sm")}(t[0])};angular.module("srisys-app").directive("formInput",[function(){return{restrict:"A",link:t}}])}(),angular.module("srisys-app").directive("loadingIndicator",[function(e){return{restrict:"E",templateUrl:"/views/common/loading-indicator.html?"+$.now(),controller:["$scope","loadingService",function(e,t){e.showIndicator=t.isShown,e.$watch(function(){return t.isShown},function(t,r){e.showIndicator=t})}],scope:{loadingText:"@",showIndicator:"=?"},link:function(e){(angular.isUndefined(e.loadingText)||""==e.loadingText)&&(e.loadingText="Loading")}}}]),angular.module("srisys-app").directive("navigation",[function(){return{restrict:"E",controller:["$state","currentUser","localStorage","keys","PermPermissionStore",function(e,t,r,o,n){return this.loggedUser=t.userProfile,this.logout=function(){r.remove(o.userkey),t.setUserProfile("",""),n.clearStore(),e.go("login")},this}],controllerAs:"navCtrl",templateUrl:"/views/common/navigation.html?"+$.now()}}]),angular.module("srisys-app").directive("noRecords",[function(){return{restrict:"A",templateUrl:"/views/common/no-records.html?"+$.now(),scope:{colspan:"@"}}}]),angular.module("srisys-app").directive("numericTextbox",[function(){var e={};return{require:"?ngModel",restrict:"A",compile:function(t,r){var o=t.is("input:text");return function(t,n,i,a){var s=angular.extend({},e,t.$eval(i.numericTextbox)),l=function(e,t){$.isNumeric(t)&&e.autoNumeric("set",t)};n.autoNumeric(s),a&&o?(t.$watch(r.ngModel,function(e,t){a.$render()}),a.$render=function(){l(n,a.$viewValue)},n.on("change",function(e){t.$apply(function(){a.$setViewValue(n.autoNumeric("get"))})})):o&&i.$observe("value",function(e){l(n,e)})}}}}]),angular.module("srisys-app").directive("pager",[function(){var e=["$scope","$timeout",function(e,t){var r=this;return r.goToPrev=function(){1!=e.currentPage&&r.goToPage(e.currentPage-1)},r.goToNext=function(){if(e.currentPage<e.totalPages){var t=parseInt(e.currentPage);r.goToPage(t+1)}},r.goToPage=function(r){e.currentPage=r,t(function(){e.onPageChange()},50)},r.getTotalPages=function(){var t=new Array;if(e.totalPages<=10)for(var r=1,o=e.totalPages;r<=o;r++)t.push(r);else{r=1,e.currentPage>6&&(r=e.currentPage-5);for(var n=1;n<=10;n++)r<=e.totalPages&&(t.push(r),r++)}return t},r}];return{restrict:"E",templateUrl:"/views/common/pager.html?"+$.now(),controller:e,controllerAs:"ctrl",scope:{currentPage:"=",totalPages:"=",onPageChange:"&",hasPreviousPage:"=",hasNextPage:"="}}}]),angular.module("srisys-app").directive("priceToggler",[function(){return{restrict:"E",templateUrl:"/views/common/price-toggler.html?"+$.now(),scope:{item:"=",selectedPriceType:"@",selectedPrice:"="},controller:["$scope",function(e){var t=this,r=["mainPrice","nePrice","walkInPrice"],o=0;return t.togglePrices=function(){var n=o+1<r.length?o+1:0;t.selectedPrice=e.selectedPrice=e.item[r[n]],o=n},e.$watch("item",function(n,i,a){var s=0;0!=n.id&&(s=n[e.selectedPriceType],o=r.indexOf(e.selectedPriceType)),t.selectedPrice=e.selectedPrice=s},!0),t}],controllerAs:"ctrl"}}]),function(e){var t=function(e,t){!function(e){e.querySelector("span").classList.add("input-group-addon");var t=e.querySelector("input, textarea, select"),r=t.getAttribute("type");"checkbox"!==r&&"radio"!==r&&(t.classList.add("form-control"),t.classList.add("input-sm")),e.classList.add("input-group"),e.classList.add("input-group-sm"),e.classList.contains("col-md-2")&&e.classList.add("filter-override")}(t[0])};angular.module("srisys-app").directive("searchInput",[function(){return{restrict:"A",link:t}}])}(),angular.module("srisys-app").directive("sidebar",[function(){return{restrict:"E",templateUrl:"/views/common/sidebar.html?"+$.now(),scope:{items:"="}}}]),angular.module("srisys-app").directive("summaryControls",[function(){return{restrict:"E",templateUrl:"/views/common/summary-controls.html?"+$.now(),scope:{showDetails:"=",detailsState:"@",detailsTitle:"@",showEdit:"=",editState:"@",editTitle:"@",showDelete:"=",onDelete:"&",deleteTitle:"@"}}}]),angular.module("srisys-app").directive("summaryShell",[function(){return{restrict:"E",transclude:{title:"shellTitle",search:"shellSearch",table:"shellTable"},templateUrl:"/views/common/summary-shell.html?"+$.now()}}]),angular.module("srisys-app").factory("activityService",["$http","env",function(e,t){var r=t.baseUrl+"/api/activity",o={};return o.searchActivities=function(t){var o=r+"/search";return e.post(o,t)},o.getActivities=function(t){var o=r+"/lookup";return e.post(o,t)},o.saveActivity=function(t){return e.post(r,t)},o.deleteActivity=function(t){var o=r+"/"+t;return e.delete(o)},o}]),angular.module("srisys-app").factory("authService",["$http","formEncode","currentUser","env",function(e,t,r,o){return{login:function(n,i){var a=t({username:n,password:i});return e.post(o.baseUrl+"/auth/connect/token",a,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){return r.setUserProfile(n,e.data.token),n})}}}]),angular.module("srisys-app").factory("borrowerService",["$http","env",function(e,t){var r=t.baseUrl+"/api/borrower",o={};return o.getBorrowerLookup=function(){var t=r+"/lookup";return e.get(t)},o.searchBorrowers=function(t){var o=r+"/search";return e.post(o,t)},o.getBorrowerById=function(t){var o=r+"/"+t;return e.get(o)},o.saveBorrower=function(t,o){if(0==t)return e.post(r,o);var n=r+"/"+t;return e.put(n,o)},o.deleteBorrower=function(t){var o=r+"/"+t;return e.delete(o)},o}]),angular.module("srisys-app").factory("categoryService",["$http","env",function(e,t){var r=t.baseUrl+"/api/category",o={};return o.getCategoryLookup=function(){var t=r+"/lookup";return e.get(t)},o.searchCategories=function(t){var o=r+"/search";return e.post(o,t)},o.getCategoryById=function(t){var o=r+"/"+t;return e.get(o)},o.saveCategory=function(t,o){if(0==t)return e.post(r,o);var n=r+"/"+t;return e.put(n,o)},o.deleteCategory=function(t){var o=r+"/"+t;return e.delete(o)},o.deleteSubcategory=function(t,o){var n=r+"/"+t+"/subcategory/"+o;return e.delete(n)},o}]),angular.module("srisys-app").factory("currentUser",["localStorage","keys","PermPermissionStore",function(e,t,r){var o=function(){var o={userId:0,username:"",name:"",token:"",get loggedIn(){return this.token}},n=e.get(t.userkey);n&&(o.userId=n.userId,o.username=n.username,o.name=n.name,o.token=n.token);var i=e.get(t.userpermissions);return i&&r.defineManyPermissions(i,function(){return!0}),o}();return{setUserProfile:function(n,i){if(o.username=n,o.token=i,i){var a=JSON.parse(window.atob(i.split(".")[1]));if(o.userId=a.sid,o.name=a.given_name,a.accessRights){var s=a.accessRights.split(",");r.defineManyPermissions(s,function(){return!0}),e.add(t.userpermissions,s)}e.add(t.userkey,o)}},userProfile:o}}]),angular.module("srisys-app").factory("formEncode",[function(){return function(e){var t=[];for(var r in e)t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.join("&").replace(/%20/g,"+")}}]),angular.module("srisys-app").factory("inventoryService",["$http","env",function(e,t){var r=t.baseUrl+"/api/material",o={};return o.getItemLookup=function(t){var o=r+"/lookup/"+(t||0);return e.get(o)},o.searchItems=function(t){var o=r+"/search";return e.post(o,t)},o.getItemById=function(t){var o=r+"/"+t;return e.get(o)},o.saveItem=function(t,o){if(0==t)return e.post(r,o);var n=r+"/"+t;return e.put(n,o)},o.deleteItem=function(t){var o=r+"/"+t;return e.delete(o)},o.adjustQuantity=function(t){var o=r+"/adjust";return e.post(o,t)},o}]),angular.module("srisys-app").factory("loadingService",[function(){var e=this;e.isShown=!1,e.showLoading=function(){t(!0)},e.hideLoading=function(){t(!1)};var t=function(t){e.isShown=!!t};return e}]),angular.module("srisys-app").factory("localStorage",["$window",function(e){var t=e.sessionStorage;return{add:function(e,r){r=angular.toJson(r),t.setItem(e,r)},get:function(e){var r=t.getItem(e);return r&&(r=angular.fromJson(r)),r},remove:function(e){t.removeItem(e)}}}]),angular.module("srisys-app").factory("loginRedirect",["$q","$state",function(e,t){var r="home",o=function(e){r=e};return{setLastState:o,redirectPostLogin:function(){t.go(r),o("home")}}}]),angular.module("srisys-app").factory("lookupService",["env","$http",function(e,t){var r={},o=e.baseUrl;return r.fetchItems=function(e,r){var n=o+e+"?search="+r+"&pageSize=20";return t.get(n)},r.fetchItemById=function(e,r){var n=o+e+"/"+r;return t.get(n)},r}]),angular.module("srisys-app").factory("referenceService",["$http","env",function(e,t){var r=t.baseUrl+"/api/reference",o={};return o.getReferenceLookup=function(t,o){var n=r+"/"+t+"/lookup";return o&&(n=n+"/"+o),e.get(n)},o.searchReferences=function(t,o){var n=r+"/"+t+"/search";return e.post(n,o)},o.getReferenceById=function(t,o){var n=r+"/"+t+"/"+o;return e.get(n)},o.saveReference=function(t,o){if(0===t)return e.post(r,o);var n=r+"/"+t;return e.put(n,o)},o.deleteReference=function(t){var o=r+"/"+t;return e.delete(o)},o}]),angular.module("srisys-app").factory("reportService",["$http","env",function(e,t){var r=t.baseUrl+"/api/report",o={};return o.getDailyActivities=function(t){var o=r+"/daily-activity";return e.post(o,t)},o.getLowStocks=function(){var t=r+"/low-stock";return e.get(t)},o.getStocks=function(){var t=r+"/stocks";return e.get(t)},o}]),angular.module("srisys-app").factory("supplierService",["$http","env",function(e,t){var r=t.baseUrl+"/api/supplier",o={};return o.getSupplierLookup=function(){var t=r+"/lookup";return e.get(t)},o.searchSuppliers=function(t){var o=r+"/search";return e.post(o,t)},o.getSupplierById=function(t){var o=r+"/"+t;return e.get(o)},o.saveSupplier=function(t,o){if(0==t)return e.post(r,o);var n=r+"/"+t;return e.put(n,o)},o.deleteSupplier=function(t){var o=r+"/"+t;return e.delete(o)},o}]),function(e){e.factory("tokenService",["currentUser","$q",function(e,t){return{request:function(r){return e.userProfile.loggedIn&&(r.headers.Authorization="Bearer "+e.userProfile.token),t.when(r)}}}]),e.config(["$httpProvider",function(e){e.interceptors.push("tokenService")}])}(angular.module("srisys-app")),angular.module("srisys-app").factory("userService",["$http","env",function(e,t){var r=t.baseUrl+"/api/user",o={};return o.getUserLookup=function(){var t=r+"/lookup";return e.get(t)},o.searchUsers=function(t){var o=r+"/search";return e.post(o,t)},o.getUserById=function(t){var o=r+"/"+t;return e.get(o)},o.saveUser=function(t,o){if(0==t)return e.post(r,o);var n=r+"/"+t;return e.put(n,o)},o.deleteUser=function(t){var o=r+"/"+t;return e.delete(o)},o}]),angular.module("srisys-app").factory("utils",["loadingService",function(e){var t={};return t.showSuccessMessage=function(e){toastr.success(e,"Success")},t.showErrorMessage=function(e){toastr.error(e,"Error")},t.onError=function(e){var r="There was an error processing your requests.";e.data.errorMessage&&(r=e.data.errorMessage),t.showErrorMessage(r),console.log(e)},t.showLoading=function(){e.showLoading()},t.hideLoading=function(){e.hideLoading()},t.populateDropdownlist=function(e,t,r,o){var n=e.data;if(angular.copy(n,t),""!=o){var i={id:0};i[r]=o,t.splice(0,0,i)}},t.showConfirmMessage=function(e){return confirm(e)},t}]),angular.module("srisys-app").filter("noValue",[function(){return function(e){return e&&""!=e&&"0001-01-01T00:00:00"!=e.toString()?e:"-"}}]),angular.module("srisys-app").controller("borrowItemController",["$q","$scope","$state","activityService","inventoryService","borrowerService","currentUser","utils",function(e,t,r,o,n,i,a,s){var l=this,c={type:1,borrowedById:0,releasedById:a.userProfile.userId,releasedByUser:a.userProfile.name,date:new Date,activities:[]},u={quantity:0,isFocused:!0,materialId:0},d=r.current.data.type;l.borrow={},l.itemList=[],l.borrowerList=[],l.defaultFocus=!0,l.saveEnabled=!0,l.header="Tools"==d?"Borrow Tools.":"Use Consumables.",l.typeId="Tools"==d?1:2,t.$watch(()=>l.borrow.activities,function(e,t){m()},!0),l.save=function(){s.showLoading(),l.saveEnabled=!1;for(var e=0,t=l.borrow.activities.length;e<t;e++)l.borrow.activities[e].borrowedById=l.borrow.borrowedById,l.borrow.activities[e].releasedById=l.borrow.releasedById,l.borrow.activities[e].date=l.borrow.date.toLocaleDateString();o.saveActivity(l.borrow).then(f,s.onError).finally(g)},l.reset=function(){p()},l.addItemBorrowed=function(){var e=angular.copy(u);l.borrow.activities.splice(0,0,e)};var m=function(){for(var e=0,t=l.borrow.activities.length;e<t;e++){var r=l.borrow.activities[e],o=r.selectedMaterial;o&&(console.log(o),r.materialId=o.id,r.unit=o.unit,r.brand=o.brand,r.size=o.size,r.remainingQuantity=o.remainingQuantity)}},p=function(){angular.copy(c,l.borrow),l.defaultFocus=!0,l.borrowForm&&(l.borrowForm.$setPristine(),l.borrowForm.$setUntouched())},f=function(){s.showSuccessMessage("Materials borrowed successfully."),v(),p()},g=function(){s.hideLoading(),l.saveEnabled=!0},v=function(){s.showLoading();var t="Tools"==d?1:2,r={item:n.getItemLookup(t),borrower:i.getBorrowerLookup()};e.all(r).then(e=>{s.populateDropdownlist(e.item,l.itemList,"",""),s.populateDropdownlist(e.borrower,l.borrowerList,"","")},s.onError).finally(s.hideLoading)};return $(function(){v(),p()}),l}]),angular.module("srisys-app").controller("manageActivityController",["$state",function(e){return this.sidebarItems=[{text:"Activity Log",isHeader:!0,isItem:!1,icon:"fa-exchange"},{text:"View Log",isHeader:!1,isItem:!0,icon:"fa-file-text-o",link:".log"},{text:"Borrow Tools",isHeader:!1,isItem:!0,icon:"fa-wrench",link:".borrow"},{text:"Use Consumables",isHeader:!1,isItem:!0,icon:"fa-paperclip",link:".consume"},{text:"Return Materials",isHeader:!1,isItem:!0,icon:"fa-undo",link:".return"}],$(function(){e.go(".log")}),this}]),angular.module("srisys-app").controller("returnItemController",["$q","activityService","inventoryService","borrowerService","currentUser","utils",function(e,t,r,o,n,i){var a=this,s={type:2,date:new Date,returnedById:0,receivedByUser:n.userProfile.name,receivedById:n.userProfile.userId,activities:[]};a.activities=[],a.itemList=[],a.borrowerList=[],a.filters={sortBy:"Date",sortDirection:"desc",pageIndex:1,pageSize:200,materialId:0,borrowedById:0,activityStatus:1},a.returns={},a.defaultFocus=!0,a.saveEnabled=!0,a.save=function(){i.showLoading(),a.saveEnabled=!1;for(var e=0,r=a.activities.length;e<r;e++){var o=a.activities[e];if(o.quantityReturned&&0!=o.quantityReturned){var n={id:o.id,date:a.returns.date.toLocaleDateString(),materialId:o.materialId,quantity:o.quantityReturned<=o.balance?o.quantityReturned:o.balance,returnedById:a.returns.returnedById,receivedById:a.returns.receivedById};a.returns.activities.push(n)}}if(0==a.returns.activities.length)return i.showErrorMessage("Please input at least 1 return item."),void u();console.log(a.returns),t.saveActivity(a.returns).then(c,i.onError).finally(u)},a.reset=function(){l()},a.performFilter=function(){i.showLoading(),t.getActivities(a.filters).then(d,i.onError).finally(i.hideLoading)};var l=function(){angular.copy(s,a.returns),a.defaultFocus=!0,a.returnForm&&(a.returnForm.$setPristine(),a.returnForm.$setUntouched())},c=function(){i.showSuccessMessage("Materials returned successfully."),a.performFilter(),l()},u=function(){i.hideLoading(),a.saveEnabled=!0,a.defaultFocus=!0},d=function(e){a.activities=e.data,a.activities.map(e=>{e.quantityReturned=0})},m=function(e){d(e.activity),i.populateDropdownlist(e.items,a.itemList,"name","Filter by materials.."),i.populateDropdownlist(e.borrower,a.borrowerList,"","")};return $(function(){!function(){i.showLoading();var n={activity:t.getActivities(a.filters),items:r.getItemLookup(),borrower:o.getBorrowerLookup()};e.all(n).then(m,i.onError).finally(i.hideLoading)}(),l()}),a}]),angular.module("srisys-app").controller("viewActivitiesController",["$q","activityService","inventoryService","borrowerService","utils",function(e,t,r,o,n){var i=this;i.summaryResult={items:[]},i.itemList=[],i.borrowerList=[],i.focus=!0,i.currentPage=1,i.filters={sortBy:"Date",sortDirection:"desc",pageIndex:i.currentPage,materialId:0,borrowedById:0},i.fetchActivities=function(){n.showLoading(),i.filters.isComplete?i.filters.activityStatus=2:i.filters.activityStatus=void 0,t.searchActivities(i.filters).then(a,n.onError).finally(n.hideLoading)},i.clearFilter=function(){i.filters.searchTerm="",i.focus=!0},i.showHideDetails=function(e){e.show?e.show=!1:e.show=!0},i.changePage=function(){i.fetchActivities()};var a=function(e){angular.copy(e.data,i.summaryResult)},s=function(e){a(e.activity),n.populateDropdownlist(e.item,i.itemList,"name","Filter by material.."),n.populateDropdownlist(e.borrower,i.borrowerList,"name","Filter by borrower..")};return $(function(){!function(){n.showLoading();var a={activity:t.searchActivities(i.filters),item:r.getItemLookup(),borrower:o.getBorrowerLookup()};e.all(a).then(s,n.onError).finally(n.hideLoading)}()}),i}]),angular.module("srisys-app").controller("homeController",["$q","activityService","reportService","utils",function(e,t,r,o){var n=this;n.sidebarItems=[{text:"Quick Links",isHeader:!0,isItem:!1,icon:"fa-link"},{text:"Borrow Materials",isHeader:!1,isItem:!0,icon:"fa-mail-forward",link:"activity.borrow"},{text:"Return Materials",isHeader:!1,isItem:!0,icon:"fa-undo",link:"activity.return"},{text:"Search Inventory",isHeader:!1,isItem:!0,icon:"fa-search",link:"inventory.list"},{text:"Add New Material",isHeader:!1,isItem:!0,icon:"fa-plus",link:"inventory.add({ id: 0 })"}],n.recentActivities=[],n.lowStock=[];var i=function(e){var t=e.recentActivities.data;angular.copy(t.items,n.recentActivities);var r=e.lowStock.data;angular.copy(r,n.lowStock)};return $(function(){!function(){o.showLoading();var n={recentActivities:t.searchActivities({sortBy:"Date",sortDirection:"desc",pageIndex:1,pageSize:50}),lowStock:r.getLowStocks()};e.all(n).then(i,o.onError).finally(o.hideLoading)}()}),n}]),angular.module("srisys-app").controller("addItemController",["$scope","$q","$stateParams","inventoryService","supplierService","categoryService","utils",function(e,t,r,o,n,i,a){var s=this,l={typeId:"1",price:0};s.item={},s.categoryList=[],s.subcategoryList=[],s.supplierList=[],s.defaultFocus=!0,s.showConsumableFields=!1,s.saveEnabled=!0,s.quantityEnabled=0==r.id,e.$watch(()=>s.item.typeId,function(e,t){e&&(s.item.typeId=e.toString(),s.showConsumableFields="2"==e,s.defaultFocus=!0)}),e.$watch(()=>s.item.categoryId,function(e,t){var r=[];if(e&&0!=e){var o=s.categoryList.find(t=>t.id==e).subcategories;angular.copy(o,r)}angular.copy(r,s.subcategoryList)},!0),s.save=function(){a.showLoading(),s.saveEnabled=!1,o.saveItem(r.id,s.item).then(u,a.onError).finally(d)},s.reset=function(){c()};var c=function(){angular.copy(l,s.item),s.defaultFocus=!0,s.addItemForm&&s.addItemForm.$setPristine()},u=function(e){a.showSuccessMessage("Material saved successfully."),0!=r.id&&angular.copy(s.item,l),c()},d=function(){a.hideLoading(),s.saveEnabled=!0},m=function(e){a.populateDropdownlist(e.category,s.categoryList,"",""),a.populateDropdownlist(e.supplier,s.supplierList,"",""),e.item&&angular.copy(e.item.data,l),c()};return $(function(){!function(){a.showLoading();var e={category:i.getCategoryLookup(),supplier:n.getSupplierLookup()};0!=r.id&&(e.item=o.getItemById(r.id)),t.all(e).then(m,a.onError).finally(a.hideLoading)}()}),s}]),angular.module("srisys-app").controller("adjustItemController",["$q","inventoryService","utils",function(e,t,r){var o=this,n={materialId:0,adjustmentType:"1",quantity:1,remarks:""};o.adjustment={},o.itemList=[],o.defaultFocus=!0,o.saveEnabled=!0,o.save=function(){r.showLoading(),o.saveEnabled=!1,t.adjustQuantity(o.adjustment).then(a,r.onError).finally(s)},o.reset=function(){i()};var i=function(){angular.copy(n,o.adjustment),o.defaultFocus=!0,o.adjustmentForm&&(o.adjustmentForm.$setPristine(),o.adjustmentForm.$setUntouched())},a=function(){r.showSuccessMessage("Adjustment saved successfully."),i()},s=function(){r.hideLoading(),o.saveEnabled=!0},l=function(){r.showLoading();var n={item:t.getItemLookup()};e.all(n).then(e=>{!function(e){r.populateDropdownlist(e,o.itemList,"name","-- Select Material --")}(e.item)},r.onError).finally(r.hideLoading)};return $(function(){l(),i()}),o}]),angular.module("srisys-app").controller("itemDetailsController",["$stateParams","inventoryService","utils",function(e,t,r){var o=this;o.item={};var n=function(e){angular.copy(e.data,o.item)};return $(function(){0!=e.id&&(r.showLoading(),t.getItemById(e.id).then(n,r.onError).finally(r.hideLoading))}),o}]),angular.module("srisys-app").controller("manageInventoryController",["$state",function(e){return this.sidebarItems=[{text:"Inventory",isHeader:!0,isItem:!1,icon:"fa-database"},{text:"Add New Item",isHeader:!1,isItem:!0,icon:"fa-plus",link:".add({ id: 0 })"},{text:"Search Items",isHeader:!1,isItem:!0,icon:"fa-search",link:".list"},{text:"Inventory Adjustment",isHeader:!0,isItem:!1,icon:"fa-sliders"},{text:"Purchase Items",isHeader:!1,isItem:!0,icon:"fa-credit-card",link:".purchase"},{text:"Adjust Quantity",isHeader:!1,isItem:!0,icon:"fa-arrows-h",link:".adjust"}],$(function(){e.go(".list")}),this}]),angular.module("srisys-app").controller("purchaseItemController",["$q","inventoryService","supplierService","utils",function(e,t,r,o){var n=this,i={materialId:0,adjustmentType:"1",quantity:1,isPurchase:!0,purchaseDate:new Date,price:0,updatePrice:!1,remarks:"",receiptNumber:""};n.purchase={},n.itemList=[],n.supplierList=[],n.defaultFocus=!0,n.saveEnabled=!0,n.save=function(){o.showLoading(),n.saveEnabled=!1,t.adjustQuantity(n.purchase).then(s,o.onError).finally(l)},n.reset=function(){a()};var a=function(){angular.copy(i,n.purchase),n.defaultFocus=!0,c(),n.addPurchaseForm&&(n.addPurchaseForm.$setPristine(),n.addPurchaseForm.$setUntouched())},s=function(){o.showSuccessMessage("Purchase saved successfully."),a()},l=function(){o.hideLoading(),n.saveEnabled=!0},c=function(){n.purchase.supplier=n.supplierList[0]},u=function(e){o.populateDropdownlist(e.item,n.itemList,"name","-- Select Material --"),o.populateDropdownlist(e.supplier,n.supplierList,"",""),c()};return $(function(){!function(){o.showLoading();var n={item:t.getItemLookup(),supplier:r.getSupplierLookup()};e.all(n).then(u,o.onError).finally(o.hideLoading)}(),a()}),n}]),angular.module("srisys-app").controller("viewItemsController",["$q","$scope","inventoryService","categoryService","utils",function(e,t,r,o,n){var i=this;i.focus=!0,i.currentPage=1,i.filters={sortBy:"Name",sortDirection:"asc",pageIndex:i.currentPage,searchTerm:"",typeId:"0",categoryId:0,subCategoryId:0},i.summaryResult={items:[]},i.categoryList=[],i.subcategoryList=[],i.headers=[{text:"Name",value:"Name"},{text:"(In) Qty",value:"Quantity",class:"text-center"},{text:"Type",value:"Type.Code"},{text:"Category",value:"Category.Name"},{text:"Subcategory",value:"SubCategory.Name"},{text:"Brand",value:"Brand"},{text:"Model",value:"Model"},{text:"Size",value:"Size"},{text:"",value:""}],t.$watch(()=>i.filters.categoryId,function(e,t){var r=[];if(0!=e){var o=i.categoryList.find(t=>t.id==e).subcategories;angular.copy(o,r)}r.splice(0,0,{id:0,name:"Filter by subcategory.."}),angular.copy(r,i.subcategoryList),i.filters.subCategoryId=0},!0),i.fetchItems=function(){n.showLoading(),r.searchItems(i.filters).then(a,n.onError).finally(n.hideLoading)},i.clearFilter=function(){i.filters.searchTerm="",i.focus=!0},i.changePage=function(){i.fetchItems()},i.delete=function(e){n.showConfirmMessage("Are you sure you want to delete this item?")&&r.deleteItem(e).then(e=>{i.fetchItems()},n.onError).finally(n.hideLoading)};var a=function(e){angular.copy(e.data,i.summaryResult)},s=function(e){a(e.item),n.populateDropdownlist(e.category,i.categoryList,"name","Filter by category..")};return $(function(){!function(){n.showLoading();var t={item:r.searchItems(i.filters),category:o.getCategoryLookup()};e.all(t).then(s,n.onError).finally(n.hideLoading)}()}),i}]),angular.module("srisys-app").controller("loginController",["authService","loginRedirect","currentUser",function(e,t,r){var o=this;return o.defaultFocus=!0,o.username="",o.password="",o.userProfile=r,o.signingIn=!1,o.login=function(r){o.signingIn=!0,r.$valid&&e.login(o.username,o.password).then(function(e){t.redirectPostLogin()},function(e){e&&e.data.error,toastr.error(e.data.error,"Something went wrong.")}).finally(function(){o.password=o.username="",r.$setUntouched(),r.$setPristine(),o.defaultFocus=!0,o.signingIn=!1})},o}]),angular.module("srisys-app").controller("dailyReportController",["$state","$window","$timeout","reportService","utils",function(e,t,r,o,n){var i=this;i.activities=[],i.type=e.current.data.type,i.filters={selectedDate:new Date,materialTypeId:"Tools"==i.type?1:2},i.print=(()=>{t.print()}),i.defaultFocus=!0,i.fetchReport=function(){n.showLoading(),i.filters.reportDate=i.filters.selectedDate.toLocaleDateString(),console.log(i.filters.reportDate),o.getDailyActivities(i.filters).then(a,n.onError).finally(n.hideLoading)};var a=function(e){angular.copy(e.data,i.activities)};return $(function(){i.fetchReport()}),i}]),angular.module("srisys-app").controller("lowStocksReportController",["$window","reportService","utils",function(e,t,r){var o=this;o.items=[],o.date=(new Date).toLocaleDateString(),o.print=(()=>{e.print()});var n=function(e){angular.copy(e.data,o.items)};return $(function(){r.showLoading(),t.getLowStocks().then(n,r.hideLoading).finally(r.hideLoading)}),o}]),angular.module("srisys-app").controller("manageReportsController",[function(){return this.sidebarItems=[{text:"Daily Reports",isHeader:!0,isItem:!1,icon:"fa-line-chart"},{text:"Tools",isHeader:!1,isItem:!0,icon:"fa-area-chart",link:".items"},{text:"Consumables",isHeader:!1,isItem:!0,icon:"fa-area-chart",link:".consumables"},{text:"View Reports",isHeader:!0,isItem:!1,icon:"fa-bar-chart-o"},{text:"Count Sheet",isHeader:!1,isItem:!0,icon:"fa-pie-chart",link:".count-sheet"},{text:"Low Stocks",isHeader:!1,isItem:!0,icon:"fa-pie-chart",link:".low-stocks"},{text:"Stocks",isHeader:!1,isItem:!0,icon:"fa-pie-chart",link:".stocks"}],this}]),angular.module("srisys-app").controller("stocksReportController",["$window","reportService","utils",function(e,t,r){var o=this;o.items=[],o.date=(new Date).toLocaleDateString(),o.print=(()=>{e.print()});var n=function(e){angular.copy(e.data,o.items)};return $(function(){r.showLoading(),t.getStocks().then(n,r.hideLoading).finally(r.hideLoading)}),o}]),angular.module("srisys-app").controller("addBorrowerController",["$stateParams","borrowerService","utils",function(e,t,r){var o=this,n={};o.borrower={},o.defaultFocus=!0,o.saveEnabled=!0,o.save=function(){r.showLoading(),o.saveEnabled=!1,t.saveBorrower(e.id,o.borrower).then(a,r.onError).finally(s)},o.reset=function(){i()};var i=function(){angular.copy(n,o.borrower),o.addBorrowerForm.$setPristine(),o.defaultFocus=!0},a=function(t){r.showSuccessMessage("Borrower saved successfully."),0!=e.id&&angular.copy(o.borrower,n),i()},s=function(){r.hideLoading(),o.saveEnabled=!0},l=function(e){angular.copy(e.data,n),i()};return $(function(){0!=e.id&&(r.showLoading(),t.getBorrowerById(e.id).then(l,r.onError).finally(r.hideLoading))}),o}]),angular.module("srisys-app").controller("addCategoryController",["$stateParams","categoryService","utils",function(e,t,r){var o=this,n={};o.category={name:"",subcategories:[]},o.defaultFocus=!0,o.saveEnabled=!0,o.save=function(){r.showLoading(),o.saveEnabled=!1,t.saveCategory(e.id,o.category).then(a,r.onError).finally(s)},o.reset=function(){i()},o.addSubcategory=function(){o.category.subcategories.push({id:0,name:"",focus:!0})},o.removeSubcategory=function(n){var i=o.category.subcategories[n];if(i&&0!=i.id){if(!confirm("This subcategory has already been saved. Are you sure?"))return;t.deleteSubcategory(e.id,i.id).then(()=>{o.category.subcategories.splice(n,1),c()},r.onError)}else o.category.subcategories.splice(n,1)};var i=function(){angular.copy(n,o.category),o.addCategoryForm.$setPristine(),o.defaultFocus=!0},a=function(t){r.showSuccessMessage("Category saved successfully."),0==e.id?i():c()},s=function(){r.hideLoading(),o.saveEnabled=!0},l=function(e){angular.copy(e.data,n),i()},c=function(){0!=e.id&&(r.showLoading(),t.getCategoryById(e.id).then(l,r.onError).finally(r.hideLoading))};return $(function(){c()}),o}]),angular.module("srisys-app").controller("addSupplierController",["$stateParams","supplierService","utils",function(e,t,r){var o=this,n={};o.supplier={},o.defaultFocus=!0,o.saveEnabled=!0,o.save=function(){r.showLoading(),o.saveEnabled=!1,t.saveSupplier(e.id,o.supplier).then(a,r.onError).finally(s)},o.reset=function(){i()};var i=function(){angular.copy(n,o.supplier),o.defaultFocus=!0,o.addSupplierForm&&o.addSupplierForm.$setPristine()},a=function(t){r.showSuccessMessage("Supplier saved successfully."),0!=e.id&&angular.copy(o.supplier,n),i()},s=function(){r.hideLoading(),o.saveEnabled=!0},l=function(e){angular.copy(e.data,n),i()};return $(function(){0!=e.id&&(r.showLoading(),t.getSupplierById(e.id).then(l,r.onError).finally(r.hideLoading))}),o}]),angular.module("srisys-app").controller("addUserController",["$stateParams","userService","utils",function(e,t,r){var o=this,n={canView:!0};o.user={},o.defaultFocus=!0,o.saveEnabled=!0,o.accessRights=[{text:"Administrator",value:"isAdmin",selected:!1},{text:"Can View",value:"canView",selected:!0},{text:"Can Write",value:"canWrite",selected:!1},{text:"Can Delete",value:"canDelete",selected:!1}],o.save=function(){r.showLoading(),o.saveEnabled=!1;var n=[];o.accessRights.forEach((e,t)=>{e.selected&&n.push(e.value),o.user[e.value]=e.selected}),o.user.accessRights=n.join(","),t.saveUser(e.id,o.user).then(a,r.onError).finally(s)},o.reset=function(){i()};var i=function(){angular.copy(n,o.user),o.defaultFocus=!0,o.accessRights.forEach((e,t)=>{e.selected=n[e.value]}),o.addUserForm&&o.addUserForm.$setPristine()},a=function(t){r.showSuccessMessage("User saved successfully."),0!=e.id&&angular.copy(o.user,n),i()},s=function(){r.hideLoading(),o.saveEnabled=!0},l=function(e){angular.copy(e.data,n),i()};return $(function(){0!=e.id&&(r.showLoading(),t.getUserById(e.id).then(l,r.onError).finally(r.hideLoading))}),o}]),angular.module("srisys-app").controller("manageSystemController",[function(){return this.sidebarItems=[{text:"Borrowers",isHeader:!0,isItem:!1,icon:"fa-users"},{text:"Add New Borrower",isHeader:!1,isItem:!0,icon:"fa-plus",link:".add-borrower({ id: 0 })"},{text:"Search Borrowers",isHeader:!1,isItem:!0,icon:"fa-search",link:".list-borrowers"},{text:"Categories",isHeader:!0,isItem:!1,icon:"fa-file-o"},{text:"Add New Category",isHeader:!1,isItem:!0,icon:"fa-plus",link:".add-category({ id: 0 })"},{text:"Search Categories",isHeader:!1,isItem:!0,icon:"fa-search",link:".list-categories"},{text:"Suppliers",isHeader:!0,isItem:!1,icon:"fa-truck"},{text:"Add New Supplier",isHeader:!1,isItem:!0,icon:"fa-plus",link:".add-supplier({ id: 0 })"},{text:"Search Suppliers",isHeader:!1,isItem:!0,icon:"fa-search",link:".list-suppliers"},{text:"Users",isHeader:!0,isItem:!1,icon:"fa-user-circle"},{text:"Add New User",isHeader:!1,isItem:!0,icon:"fa-plus",link:".add-user({ id: 0 })"},{text:"Search Users",isHeader:!1,isItem:!0,icon:"fa-search",link:".list-users"}],this}]),angular.module("srisys-app").controller("viewBorrowersController",["$q","borrowerService","utils",function(e,t,r){var o=this;o.focus=!0,o.currentPage=1,o.filters={sortBy:"Name",sortDirection:"asc",searchTerm:"",pageIndex:o.currentPage},o.summaryResult={items:[]},o.headers=[{text:"Name",value:"Name"},{text:"",value:""}],o.fetchBorrowers=function(){r.showLoading(),t.searchBorrowers(o.filters).then(n,r.onError).finally(r.hideLoading)},o.clearFilter=function(){o.filters.searchTerm="",o.focus=!0},o.changePage=function(){o.fetchBorrowers()},o.delete=function(e){r.showConfirmMessage("Are you sure you want to delete this borrower?")&&t.deleteBorrower(e).then(e=>{o.fetchBorrowers()},r.onError).finally(r.hideLoading)};var n=function(e){angular.copy(e.data,o.summaryResult)},i=function(e){n(e.borrower)};return $(function(){!function(){r.showLoading();var n={borrower:t.searchBorrowers(o.filters)};e.all(n).then(i,r.onError).finally(r.hideLoading)}()}),o}]),angular.module("srisys-app").controller("viewCategoriesController",["$q","categoryService","utils",function(e,t,r){var o=this;o.focus=!0,o.currentPage=1,o.filters={sortBy:"Name",sortDirection:"asc",searchTerm:"",pageIndex:o.currentPage},o.summaryResult={items:[]},o.headers=[{text:"Category",value:"Name"},{text:"Subcategories",value:""},{text:"",value:""}],o.fetchCategories=function(){r.showLoading(),t.searchCategories(o.filters).then(n,r.onError).finally(r.hideLoading)},o.clearFilter=function(){o.filters.searchTerm="",o.focus=!0},o.changePage=function(){o.fetchCategories()},o.delete=function(e){r.showConfirmMessage("Are you sure you want to delete this category?")&&t.deleteCategory(e).then(e=>{o.fetchCategories()},r.onError).finally(r.hideLoading)};var n=function(e){e.data.items.map(e=>{e.subs=e.subcategories.map(e=>e.name).join(", ")}),angular.copy(e.data,o.summaryResult)},i=function(e){n(e.category)};return $(function(){!function(){r.showLoading();var n={category:t.searchCategories(o.filters)};e.all(n).then(i,r.onError).finally(r.hideLoading)}()}),o}]),angular.module("srisys-app").controller("viewSuppliersController",["$q","supplierService","utils",function(e,t,r){var o=this;o.focus=!0,o.currentPage=1,o.filters={sortBy:"Name",sortDirection:"asc",searchTerm:"",pageIndex:o.currentPage},o.summaryResult={items:[]},o.headers=[{text:"Name",value:"Name"},{text:"Address",value:"Address"},{text:"Phone Number",value:"PhoneNumber"},{text:"Email",value:"Email"},{text:"Other Details",value:"OtherDetails"},{text:"",value:""}],o.fetchSuppliers=function(){r.showLoading(),t.searchSuppliers(o.filters).then(n,r.onError).finally(r.hideLoading)},o.clearFilter=function(){o.filters.searchTerm="",o.focus=!0},o.delete=function(e){r.showConfirmMessage("Are you sure you want to delete this supplier?")&&t.deleteSupplier(e).then(e=>{o.fetchSuppliers()},r.onError).finally(r.hideLoading)},o.changePage=function(){o.fetchSuppliers()};var n=function(e){angular.copy(e.data,o.summaryResult)};return $(function(){!function(){r.showLoading();var i={supplier:t.searchSuppliers(o.filters)};e.all(i).then(e=>{n(e.supplier)},r.onError).finally(r.hideLoading)}()}),o}]),angular.module("srisys-app").controller("viewUsersController",["$q","userService","utils",function(e,t,r){var o=this;o.focus=!0,o.currentPage=1,o.filters={sortBy:"Firstname",sortDirection:"asc",searchTerm:"",pageIndex:o.currentPage},o.summaryResult={items:[]},o.headers=[{text:"Username",value:"Username"},{text:"Full Name",value:"Firstname"},{text:"Is Admin",value:"",class:"text-center"},{text:"Can View",value:"",class:"text-center"},{text:"Can Write",value:"",class:"text-center"},{text:"Can Delete",value:"",class:"text-center"},{text:"",value:""}],o.fetchUsers=function(){r.showLoading(),t.searchUsers(o.filters).then(n,r.onFetchError).finally(r.hideLoading)},o.clearFilter=function(){o.filters.searchTerm="",o.focus=!0},o.changePage=function(){o.fetchUsers()},o.delete=function(e){r.showConfirmMessage("Are you sure you want to delete this user?")&&t.deleteUser(e).then(e=>{o.fetchUsers()},r.onError).finally(r.hideLoading)};var n=function(e){angular.copy(e.data,o.summaryResult)};return $(function(){!function(){r.showLoading();var i={user:t.searchUsers(o.filters)};e.all(i).then(e=>{n(e.user)},r.onFetchError).finally(r.hideLoading)}()}),o}]);